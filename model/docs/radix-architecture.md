# Radix-UI TS-JSON Architecture

This document explains the architecture of the Radix-UI TS-JSON Language within the `@model` package.

## Overview

The goal is to provide a **Declarative UI Protocol** that allows the backend (or any data source) to describe a rich user interface using pure JSON data, which is then rendered by the frontend using high-quality React components (like Radix UI or ShadCN).

### The Stack

1.  **The Language (`radix.ts`)**: A Zod-based schema that defines the _data structure_ of the UI. It is framework-agnostic and serializable.
2.  **The Protocol (JSON)**: The actual data sent over the wire (or stored in a database). It conforms to the `radix.ts` schema.
3.  **The Interpreter (`RadixAdapter`)**: A React component (or set of functions) that takes the JSON data and _maps_ it to actual React components.
4.  **The Implementation (React/ShadCN)**: The actual UI components that are rendered on the screen.

## How it Works

### 1. Define the UI (Data)

Instead of writing JSX, you write a JSON object (or a TypeScript object that compiles to JSON).

```typescript
import { DialogShape } from '@organon/model/schema';

const myDialog: DialogShape = {
  type: 'dialog',
  title: 'Edit Profile',
  trigger: { type: 'button', text: 'Edit' },
  content: {
    type: 'stack',
    children: [
      { type: 'text', text: 'Make changes to your profile here.' },
      // ... more form fields
    ],
  },
};
```

### 2. Transport (JSON)

This object can be sent from a server, saved to a file, or generated by an AI.

```json
{
  "type": "dialog",
  "title": "Edit Profile",
  "trigger": { "type": "button", "text": "Edit" },
  "content": { ... }
}
```

### 3. Render (Adapter)

The `RadixAdapter` consumes this data and renders the corresponding React components.

```tsx
import { radixAdapter } from '@organon/model/sdsl';

function App() {
  return radixAdapter.render(myDialog);
}
```

### 4. The Result (React)

The Adapter internally renders:

```tsx
<Dialog>
  <DialogTrigger>
    <Button>Edit</Button>
  </DialogTrigger>
  <DialogContent>
    <DialogTitle>Edit Profile</DialogTitle>
    <div className="flex flex-col gap-4">
      <span>Make changes to your profile here.</span>
      {/* ... */}
    </div>
  </DialogContent>
</Dialog>
```

## Relationship to ShadCN

**ShadCN is an implementation detail.**

- The `RadixAdapter` _uses_ ShadCN (or raw Radix primitives) to implement the rendering logic.
- The `radix.ts` schema _does not know_ about ShadCN. It only knows about abstract concepts like "Dialog", "Tabs", "Card".
- This separation allows us to swap out the UI library (e.g., to Material UI or native mobile components) without changing the data model.

## Why this approach?

1.  **Serialization**: You can save the UI state to a database.
2.  **Remote Control**: The server can dictate the UI structure.
3.  **AI Generation**: LLMs are very good at generating structured JSON.
4.  **Type Safety**: The `radix.ts` schema ensures the data is valid before it hits the UI.
