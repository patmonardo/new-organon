import type { Chunk, LogicalOperation } from '../syllogism/index';

/**
 * THE UNIVERSAL CONCEPT — Complete Structure
 * 
 * NOTE: The pure concept is the absolutely infinite, unconditioned and free.
 * This is the moment of "being" in the concept—simpler than reflection/existence
 * determinations, yet foundational for the entire concept structure.
 * 
 * Structure:
 * - Genesis and absoluteness
 * - Universality as negation of negation
 * - Contrast with Being
 * - Abstract universal and externality
 * - Persistence in determination
 * - Essence and creative principle
 * - Free power/love
 * - Determinateness and totality
 * - Total reflection (outward/inward)
 * - Higher universal and concretes
 * - Creative self-differentiation
 * - Finite as universality
 */

export const CANONICAL_CHUNKS: Chunk[] = [
  {
    id: 'con-univ-1-genesis-and-absoluteness',
    title: 'Pure concept: absolutely infinite, unconditioned; genesis via being → essence → concept',
    text: `A. THE UNIVERSAL CONCEPT

The pure concept is the absolutely infinite,
unconditioned and free.
It is here, as the content of our treatise
begins to be the concept itself,
that we must look back once more at its genesis.
Essence came to be out of being,
and the concept out of essence,
therefore also from being.
But this becoming has the
meaning of a self-repulsion,
so that what becomes is rather
the unconditional and the originative.
In passing over into essence,
being became a reflective shine or a positedness,
and becoming or the passing over into an other
became a positing;
conversely, the positing or the reflection of essence
sublated itself and restored itself to
a non-posited, an original being.
The concept is the mutual penetration of these moments,
namely, the qualitative and the originative existent is
only as positing and as immanent turning back,
and this pure immanent reflection simply is
the becoming-other or determinateness
which is, consequently, no less
infinite, self-referring determinateness.`,
  },
  {
    id: 'con-univ-2-universality-negation-of-negation',
    title: 'Concept self-identity; universality as negation of negation',
    text: `Thus the concept is absolute self-identity
by being first just this, the negation of negation
or the infinite unity of negativity with itself.
This pure self-reference of the concept,
which is such by positing itself through the negativity,
is the universality of the concept.
Universality seems incapable of explanation,
because it is the simplest of determinations;
explanation must rely on determinations and differentiations
and must apply predicates to its subject matter,
and this would alter rather than explain the simple.
But it is precisely of the nature of
the universal to be a simple that,
by virtue of absolute negativity,
contains difference and determinateness
in itself in the highest degree.`,
  },
  {
    id: 'con-univ-3-contrast-with-being-richness',
    title: 'Contrast with Being; universal as simple yet rich, identity as absolute mediation',
    text: `Being is simple as an immediate;
for this reason we can only intend it
without being able to say what it is;
therefore, it is immediately one
with its other, non-being.
The concept of being is just this,
that it is so simple as to vanish
into its opposite immediately;
it is becoming.
The universal is, on the contrary,
a simple that is at the same time
all the richer in itself,
for it is the concept.
First, therefore, it is simple self-reference;
it is only in itself.
But, second, this identity is
in itself absolute mediation
but not anything mediated.`,
    summary: 'Being: simple immediacy that vanishes into its opposite (becoming). Universal: simple yet rich; identity that is absolute mediation (not something mediated).'
  },
  {
    id: 'con-univ-4-abstract-universal-and-externality',
    title: 'Abstract universal, double negation, and not-yet externality',
    text: `Of the universal which is mediated,
that is to say, the abstract universal,
the one opposed to the particular and the singular,
of that we shall have to speak only in connection
with the determinate concept.
Yet, even the abstract universal entails this much,
that in order to obtain it there is required
the leaving aside of other
determinations of the concrete.
As determinations in general,
these determination are negations,
and leaving them aside is a further negating.
Even in the abstract universal, therefore,
the negation of negation is already present.
But this double negation comes to be represented
as if it were external to it,
both as if the properties of the concrete
that are left out were different
from the ones that are retained
as the content of the abstraction,
and as if this operation of leaving some aside
while retaining the rest went on outside them.
With respect to this movement,
the universal has not yet acquired
the determination of externality;
it is still in itself that absolute negation
which is, precisely, the negation of negation
or absolute negativity.`,
    summary: 'Abstract universal arises by leaving-aside determinations (double negation already present), but is misrepresented as external. The universal has not yet externality; it remains absolute negativity (negation of negation).'
  },
  {
    id: 'con-univ-5-preserves-in-determination',
    title: 'Universal maintains itself in its determination; persistence vs qualitative perishing',
    text: `Accordingly, because of this original unity,
the first negative, or the determination, is not,
to begin with, a restriction for the universal;
rather, the latter maintains itself in it
and its self-identity is positive.
The categories of being were, as concepts,
essentially these identities of the determinations
with themselves in their restriction or their otherness;
but this identity was only implicitly the concept,
was not yet made manifest.
Consequently, the qualitative determination
perished as such in its other
and had as its truth
a determination diverse from it.
The universal, on the contrary,
even when it posits itself in a determination,
remains in it what it is.
It is the soul of the concrete which it inhabits,
unhindered and equal to itself
in its manifoldness and diversity.
It is not swept away in the becoming
but persists undisturbed through it,
endowed with the power of unalterable,
undying self-preservation.`,
    summary: 'Universal is not restricted by its determination; unlike qualitative being it persists as the soul of the concrete, self-identical through becoming.'
  },
  {
    id: 'con-univ-6-essence-creative-principle',
    title: 'Not mere reflective shine; universal as essence and creative principle',
    text: `It also does not simply shine reflectively in its other,
as does the determination of reflection.
This determination, as something relative,
does not refer only to itself but is a relating.
It lets itself be known in its other,
but at first it only shines reflectively in it,
and this reflective shining of each in the other,
or their reciprocal determination,
has the form of an external activity
alongside their self-subsistence.
The universal is posited, on the contrary,
as the essence of its determination,
as this determination's own positive nature.
For the determination that constitutes the negative of the
universal is in the concept simply and solely a positedness;
essentially, in other words,
it is at the same time the negative of the negative,
and only is as this self-identity of the negative
which is the universal.
To this extent, the universal is also
the substance of its determinations,
but in such a way that
what for the substance as such was an accident,
is the concept's own self mediation,
its own immanent reflection.
But this mediation,
which first raises the accidental to necessity,
is the manifested reference;
the concept is not the abyss of formless substance,
or the necessity which is the inner identity of things
or circumstances different from each other
and reciprocally constricting;
rather, as absolute negativity,
it is the informing and creative principle,
and since the determination is not as limitation
but is just as much simply sublated as determination,
is positedness, so is the reflective shine
the appearance as appearance of the identical.`,
    summary: 'Universal is the essence and positive nature of its determinations; as absolute negativity it is creative mediation, not mere reflective shine or formless substance.'
  },
  {
    id: 'con-univ-7-free-power-love',
    title: 'Universal as free power/love; rest in its other',
    text: `The universal is therefore free power;
it is itself while reaching out
to its other and embracing it,
but without doing violence to it;
on the contrary, it is at rest
in its other as in its own.
Just as it has been called free power,
it could also be called free love
and boundless blessedness,
for it relates to that
which is distinct from it as to itself;
in it, it has returned to itself.`,
    summary: 'Universal relates to its other as to itself: free power, free love, rest-in-other as return-to-self.'
  },
  {
    id: 'con-univ-8-determinateness-totality-abstract',
    title: 'Determinateness within the universal; totality vs abstract universal',
    text: `Mention has just been made of determinateness,
even though the concept has not yet progressed to it,
being at first only as the universal
and only self-identical.
But one cannot speak of the universal
apart from determinateness
which, to be more precise,
is particularity and singularity.
For in its absolute negativity
the universal contains determinateness
in and for itself, so that,
when speaking of determinateness
in connection with the universal,
the determinateness is not being
imported into the latter from outside.
As negativity in general, that is,
according to the first immediate negation,
the universal has determinateness in it
above all as particularity;
as a second universal, as the negation of negation,
it is absolute determinateness, that is,
singularity and concreteness.
The universal is thus the totality of the concept;
it is what is concrete, is not empty
but, on the contrary, has content
by virtue of its concept;
a content in which the universal
does not just preserve itself
but is rather the universal's own,
immanent to it.
It is of course possible to abstract from this content,
but what we have then is not
the universal element of the concept
but the abstract universal,
which is an isolated and imperfect
moment of the concept, void of truth.`,
    summary: 'Universal inherently contains particularity and singularity (via absolute negativity); as totality it is concrete content. “Abstract universal” is an isolated, untrue moment.'
  },
  {
    id: 'con-univ-9-total-reflection-inward-outward',
    title: 'Universal as total reflection: outward and inward shining; determinate concept as immanent character',
    text: `More precisely, the universal shows itself
to be this totality as follows.
In so far as the universal possesses determinateness,
this determinateness is not only the first negation
but also the reflection of this negation into itself.
According to that first negation, taken by itself,
the universal is a particular,
and in this guise we shall consider it in a moment.
In the other determinateness, however,
the universal is still essentially universal,
and this side we have here still to consider.
For this determinateness, as it is in the concept,
is the total reflection a doubly reflective shine,
both outwards, as reflection into the other,
and inwards, as reflection into itself.
The outward shining establishes a distinction
with respect to an other;
the universal accordingly takes on a particularity
which is resolved in a higher universality.
Inasmuch as it now is also only a relative universal,
it does not lose its character of universality;
it preserves itself in its determinateness,
not just because it remains indifferent to it
for then it would be only posited together with it
but because of what has just been called the inward shining.
The determinateness, as determinate concept,
is bent back into itself;
it is the concept's own immanent character,
a character made essential by
being taken up into the universality
and by being pervaded by it,
just as it pervades it in turn
equal in extension and identical with it.
This is the character that belongs to the genus
as the determinateness which is not
separated from the universal.
To this extent, it is not an outwardly directed limitation,
but is positive, for by virtue of the universality
it stands in free self-reference.
Thus even the determinate concept remains
in itself infinitely free concept.`,
    summary: 'Universal\'s determinateness is double reflection (outward/inward). As inward-shining, determinateness is the immanent character (genus), equal in extension with universality; determinate concept remains infinitely free.'
  },
  {
    id: 'con-univ-10-higher-universal-and-concretes',
    title: 'Higher universal: outward turned inward; life, I, spirit as concretes; idea of infinite spirit',
    text: `But in regard to the other side
in which the genus is limited
because of its determinate character,
we have just said that, as a lower genus,
it has its resolution in a higher universal.
This universal can also be grasped as a genus
but as a more abstract one;
it always pertains, however, only to
the side of the determinate concept
which is outwardly directed.
The truly higher universal is the one in which
this outwardly directed side is redirected inwardly;
this is the second negation in which
the determinateness is present simply and solely
as something posited, or as reflective shine.
Life, the “I,” spirit, absolute concept,
are not universals only as higher genera,
but are rather concretes whose determinacies are
also not mere species or lower genera
but determinacies which, in their reality,
are self-contained and self-complete.
Of course, life, the “I,” finite spirit,
are also only determinate concepts.
To this extent, however, their resolution is
in a universal which, as the truly absolute concept,
is to be grasped as the idea of infinite spirit,
the spirit whose posited being is
the infinite, transparent reality
in which it contemplates its creation
and, in this creation, itself.`,
    summary: 'Truly higher universal redirects outwardness inward (second negation). Life, I, spirit, absolute concept are concretes with self-complete determinacies; their resolution is the idea of infinite spirit.'
  },
  {
    id: 'con-univ-11-true-infinite-universal-creative-differentiation',
    title: 'True infinite universal as particularity: creative self-differentiation; universal differences',
    text: `The true, infinite universal,
the one which, immediately in itself,
is just as much particularity as singularity,
is now to be more closely examined as particularity.
It determines itself freely;
the process by which it becomes finite
is not a transition,
the kind that occurs only
in the sphere of being;
it is creative power as
self-referring absolute negativity.
As such, it differentiates itself internally,
and this is a determining,
because the differentiating is
one with the universality.
Accordingly, it is a positing of differences
that are themselves universals, self-referring.
They become thereby fixed, isolated differences.`,
    summary: 'True infinite universal freely particularizes as creative, self-referring negativity; it internally posits differences that are themselves universals (self-referring), fixing isolated differences.'
  },
  {
    id: 'con-univ-12-finite-as-universal-form-creativity-of-concept',
    title: 'Finite subsistence as universality; the concept\'s creativity',
    text: `The isolated subsistence of the finite
that was earlier determined as its being-for-itself,
also as thinghood, as substance,
is in its truth universality,
the form with which the infinite concept
clothes its differences,
a form which is equally itself one of its differences.
Herein consists the creativity of the concept,
a creativity which is to be comprehended
only in the concept's innermost core.`,
    summary: 'Finite being-for-itself (thinghood/substance) is in truth universality—the form the infinite concept gives its differences. This is the concept\'s inner creativity.'
  }
]

export const LOGICAL_OPERATIONS: LogicalOperation[] = [
  {
    id: 'con-univ-op-1-define-pure-concept',
    chunkId: 'con-univ-1-genesis-and-absoluteness',
    label: 'Define pure concept: absolutely infinite, unconditioned; genesis via self-repulsion',
    clauses: [
      'tag(Concept,"absolutely-infinite")',
      'tag(Concept,"unconditioned")',
      'assert(genesis(Concept) == through(selfRepulsion(Being→Essence)))',
      'assert(sublates(Positing|Positedness) && restores("original-being"))',
      'assert(mutualPenetration(Concept,{positing,immanentTurningBack}))',
      'tag(Concept,"infinite-self-referring-determinateness")'
    ],
    predicates: [{ name: 'DefinesPureConcept', args: [] }],
    relations: [
      { predicate: 'derivesFrom', from: 'Concept', to: 'Essence' },
      { predicate: 'derivesFrom', from: 'Essence', to: 'Being' }
    ]
  },
  {
    id: 'con-univ-op-2-universality-negation-of-negation',
    chunkId: 'con-univ-2-universality-negation-of-negation',
    label: 'Universality as pure self-reference (negation of negation)',
    clauses: [
      'assert(selfIdentity(Concept) == negationOfNegation)',
      'assert(universality(Concept) == selfReference(via:"negativity"))',
      'tag(Universality,"contains-difference-by-absolute-negativity")'
    ],
    predicates: [{ name: 'EncodesUniversality', args: [] }],
    relations: [
      { predicate: 'grounds', from: 'AbsoluteNegativity', to: 'DifferenceInUniversality' }
    ]
  },
  {
    id: 'con-univ-op-3-being-vs-universal',
    chunkId: 'con-univ-3-contrast-with-being-richness',
    label: 'Contrast Being and Universal; identity as absolute mediation',
    clauses: [
      'annotate(Being,{mode:"immediate", fate:"vanish-into-opposite", truth:"Becoming"})',
      'annotate(Universal,{simple:true, rich:true})',
      'assert(identity(Universal) == "absolute-mediation")',
      'assert(not(mediated(Universal)))'
    ],
    predicates: [{ name: 'ContrastsBeingAndUniversal', args: [] }],
    relations: [
      { predicate: 'transitionsTo', from: 'Being', to: 'Becoming' }
    ]
  },
  {
    id: 'con-univ-op-4-abstract-universal-double-negation',
    chunkId: 'con-univ-4-abstract-universal-and-externality',
    label: 'Abstract universal via leaving-aside; double negation present; no externality yet',
    clauses: [
      'assert(obtains(AbstractUniversal) == by(leavingAside(ConcreteDeterminations)))',
      'tag(LeavingAside,"further-negating")',
      'assert(contains(AbstractUniversal, "negation-of-negation"))',
      'annotate(AbstractUniversal,{misrepresented:"as-external-operation"})',
      'assert(not(hasDetermination(Universal,"externality")))',
      'tag(Universal,"absolute-negativity")'
    ],
    predicates: [{ name: 'ExplainsAbstractUniversal', args: [] }],
    relations: [
      { predicate: 'obtainsBy', from: 'AbstractUniversal', to: 'Abstraction(LeavingAside)' },
      { predicate: 'retains', from: 'Universal', to: 'NegationOfNegation' }
    ]
  },
  {
    id: 'con-univ-op-5-persistence-in-determination',
    chunkId: 'con-univ-5-preserves-in-determination',
    label: 'Universal maintains positive self-identity within determination',
    clauses: [
      'assert(persists(UniverseUniversal,in:Determination) == true)',
      'tag(Universal,"soul-of-concrete")',
      'annotate(QualitativeDetermination,{fate:"perishes-in-other"})'
    ],
    predicates: [{ name: 'UniversalPersistence', args: [] }],
    relations: [
      { predicate: 'inhabits', from: 'Universal', to: 'Concrete' }
    ]
  },
  {
    id: 'con-univ-op-6-essence-creative-principle',
    chunkId: 'con-univ-6-essence-creative-principle',
    label: 'Universal as essence and creative mediation (not mere reflective shine)',
    clauses: [
      'assert(determinationAs(Positedness) && is(Universal,"negative-of-negative"))',
      'assert(substanceOf(Universal, Determinations))',
      'tag(Concept,"informing-creative-principle")',
      'assert(reflectiveShine == appearanceOf("identical"))'
    ],
    predicates: [{ name: 'UniversalAsEssence', args: [] }],
    relations: [
      { predicate: 'grounds', from: 'Universal', to: 'Determinations' }
    ]
  },
  {
    id: 'con-univ-op-7-free-power-love',
    chunkId: 'con-univ-7-free-power-love',
    label: 'Free power/love: rest in its other as in its own',
    clauses: [
      'tag(Universal,"free-power")',
      'tag(Universal,"free-love")',
      'assert(restsIn(Universal, Other) && equals(RelationToOther, RelationToSelf))'
    ],
    predicates: [{ name: 'UniversalEmbrace', args: [] }],
    relations: [
      { predicate: 'returnsToSelfIn', from: 'Universal', to: 'Other' }
    ]
  },
  {
    id: 'con-univ-op-8-totality-vs-abstract',
    chunkId: 'con-univ-8-determinateness-totality-abstract',
    label: 'Universal contains P and S; totality of concept vs abstract universal',
    clauses: [
      'assert(contains(Universal, Particular) && contains(Universal, Singular))',
      'tag(Universal,"totality-of-concept")',
      'tag(Universal,"concrete-with-own-content")',
      'annotate(AbstractUniversal,{status:"isolated-imperfect", truth:false})'
    ],
    predicates: [{ name: 'UniversalTotality', args: [] }],
    relations: [
      { predicate: 'hasMoment', from: 'Universal', to: 'Particular' },
      { predicate: 'hasMoment', from: 'Universal', to: 'Singular' }
    ]
  },
  {
    id: 'con-univ-op-9-double-reflection-genus-character',
    chunkId: 'con-univ-9-total-reflection-inward-outward',
    label: 'Double reflection (outward/inward); genus as immanent character; freedom of determinate concept',
    clauses: [
      'assert(determinateness(Universal).reflection == { outward:true, inward:true })',
      'tag(Determinateness,"genus-immanent-character")',
      'assert(equalInExtension(Determinateness, Universality))',
      'tag(DeterminateConcept,"infinitely-free")'
    ],
    predicates: [{ name: 'EncodesDoubleReflection', args: [] }],
    relations: [
      { predicate: 'pervades', from: 'Universality', to: 'Determinateness' },
      { predicate: 'pervades', from: 'Determinateness', to: 'Universality' }
    ]
  },
  {
    id: 'con-univ-op-10-higher-universal-inwarded',
    chunkId: 'con-univ-10-higher-universal-and-concretes',
    label: 'Truly higher universal = outward turned inward (second negation); concretes → idea of infinite spirit',
    clauses: [
      'assert(trulyHigherUniversal == inwardTurn(OutwardSide))',
      'tag(Determinateness,"positedness/reflective-shine")',
      'tag(Concretes, "Life|I|Spirit|AbsoluteConcept")',
      'assert(resolvesTo(Concretes, IdeaOfInfiniteSpirit))'
    ],
    predicates: [{ name: 'DefinesHigherUniversal', args: [] }],
    relations: [
      { predicate: 'resolvesTo', from: 'Life|I|Spirit|AbsoluteConcept', to: 'IdeaOfInfiniteSpirit' }
    ]
  },
  {
    id: 'con-univ-op-11-creative-self-differentiation',
    chunkId: 'con-univ-11-true-infinite-universal-creative-differentiation',
    label: 'Creative self-differentiation; posit universal differences',
    clauses: [
      'tag(Universal,"creative-power")',
      'assert(selfReferringAbsoluteNegativity(Universal) == true)',
      'assert(positsDifferences(Universal, kind:"universals", selfReferring:true))',
      'tag(Differences,"fixed-isolated")'
    ],
    predicates: [{ name: 'EncodesCreativeDifferentiation', args: [] }],
    relations: [
      { predicate: 'posits', from: 'Universal', to: 'UniversalDifferences' }
    ]
  },
  {
    id: 'con-univ-op-12-finite-as-universality',
    chunkId: 'con-univ-12-finite-as-universal-form-creativity-of-concept',
    label: 'Finite being-for-itself = universality as form; inner creativity of the concept',
    clauses: [
      'assert(equalsTruth(FiniteBeingForItself, Universality))',
      'assert(forms(InfiniteConcept, Differences) == Universality)',
      'tag(Concept,"inner-creativity")'
    ],
    predicates: [{ name: 'RelatesFiniteAndUniversality', args: [] }],
    relations: [
      { predicate: 'clothesWith', from: 'InfiniteConcept', to: 'Differences~Universality' }
    ]
  },
];

/* accessors */
export function getChunk(oneBasedIndex: number): Chunk | null {
  return CANONICAL_CHUNKS[oneBasedIndex - 1] ?? null;
}

export function getLogicalOpsForChunk(oneBasedIndex: number) {
  const chunk = getChunk(oneBasedIndex);
  if (!chunk) return [];
  return LOGICAL_OPERATIONS.filter((op) => op.chunkId === chunk.id);
}
